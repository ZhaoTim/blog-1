在学习 RxJS 的过程中，我发现很多概念晦涩难懂，比如：响应式编程、观察者模式、各种各样的操作符以及多播等等。理解这些概念通常会花费大量时间，而且很难将它们吃透。于是，我就编写了一个关于「开超市」的小故事，以帮助大家理解 RxJS 的核心概念。



## 命令式编程

```tsx
故事的主角小王是一个计算机专业的大学生，毕业之后就回老家开了一家超市。小王一个人忙不过来，于是就雇了小李来店里帮忙。为了更好地了解超市的经营状况，小王想让小李统计一下上周的营业额。可小李哪会这个呀，小王只好交代清楚每一个步骤：
1. 记录每天的营业额
2. 将一周内每天的营业额加起来
3. 将结果告诉老板
```

 在处理问题（What）时，命令式编程需要详细描述每一步要怎么做（How）。

用命令式的方式，来计算一周的营业额，代码如下：

```tsx
function countRevenus(revenues) {
  let total = 0;
  for (let i = 0; i < 7; i++) {
    total = total + revenues[i];
  }
  return total;
}
```



```text
小王觉得目前的营业额还不够。但是，如果让每天的营业额增加百分之十，那是不是就达到预期了呢？于是，就让小李赶紧再算一下。可小李还是不知道该如何计算。小王心想，这不就和之前差不多吗？没办法，小王还是只有手把手教：
1. 记录每天的营业额
2. 将每天的营业额乘以1.1
2. 将一周内每天的营业额加起来
3. 将结果告诉老板
```

用命令式的方式，来计算增加后的营业额，代码如下：

```js
function countImporvedRevenues() {
  let total = 0;
  for (let i = 0; i < 7; i++) {
    total = total + costs[i] * 1.2;
  }
  return total;
}
```

是不是感觉到了重复？命令式编程让电脑按照我们的指令来解决问题，但是对于很多拥有「相似模式」的问题，这样的方式还是不够简洁。

## 声明式编程





































响应式编程是一种面向数据流和传播的编程范式（来自维基百科）。它和命令式编程最大的不同，是思维方式上的不同。命令式编程是一个_

react hook 响应式编程的应用。

